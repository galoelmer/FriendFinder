<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>Friend Finder</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" />
	</head>
	<body>
		<div class="ui container">
			<h1 class="ui center aligned huge header">Survey Questions</h1>
			<div class="ui stacked segment form">
				<!--=======  ABOUT ME FORM  ========-->
				<h2 class="ui header">About You</h2>
				<div class="field">
					<label>Full Name</label>
					<input id="userName" type="text" placeholder="Full Name" name="userName" />
					<div class="prompt"></div>
				</div>
				<div class="field">
					<label>Image URL</label>
					<input id="userImageUrl" type="text" placeholder="Image URL" name="userImageUrl" />
					<div class="prompt"></div>
				</div>
				<div class="ui divider"></div>
				<!--=======  SURVEY QUESTIONS  ========-->
				<div class="field">
					<h2 class="ui grey header">Question 1</h2>
					<label>
						<h3>I believe that there is no absolute right and wrong.</h3>
					</label>
					<div class="ui selection dropdown">
						<input type="hidden" id="question_1" value="" name="questionValue" />
						<div class="prompt"></div>
						<i class="dropdown icon"></i>
						<div class="default text">Select an option</div>
						<div class="menu">
							<div class="item" data-value="1">1 &#40;Strongly Disagree&#41;</div>
							<div class="item" data-value="2">2</div>
							<div class="item" data-value="3">3</div>
							<div class="item" data-value="4">4</div>
							<div class="item" data-value="5">5 &#40;Strongly Agree&#41;</div>
						</div>
					</div>
				</div>

				<div class="field">
					<h2 class="ui grey header">Question 2</h2>
					<label>
						<h3>I want everything to be "just right."</h3>
					</label>
					<div class="ui selection dropdown">
						<input type="hidden" id="question_2" value="" />
						<i class="dropdown icon"></i>
						<div class="default text">Select an option</div>
						<div class="menu">
							<div class="item" data-value="1">1 &#40;Strongly Disagree&#41;</div>
							<div class="item" data-value="2">2</div>
							<div class="item" data-value="3">3</div>
							<div class="item" data-value="4">4</div>
							<div class="item" data-value="5">5 &#40;Strongly Agree&#41;</div>
						</div>
					</div>
				</div>

				<div class="field">
					<h2 class="ui grey header">Question 3</h2>
					<label>
						<h3>I see myself as conventional, uncreative.</h3>
					</label>
					<div class="ui selection dropdown">
						<input type="hidden" id="question_3" value="" />
						<i class="dropdown icon"></i>
						<div class="default text">Select an option</div>
						<div class="menu">
							<div class="item" data-value="1">1 &#40;Strongly Disagree&#41;</div>
							<div class="item" data-value="2">2</div>
							<div class="item" data-value="3">3</div>
							<div class="item" data-value="4">4</div>
							<div class="item" data-value="5">5 &#40;Strongly Agree&#41;</div>
						</div>
					</div>
				</div>

				<div class="field">
					<h2 class="ui grey header">Question 4</h2>
					<label>
						<h3>I like to solve complex problems.</h3>
					</label>
					<div class="ui selection dropdown">
						<input type="hidden" id="question_4" value="" />
						<i class="dropdown icon"></i>
						<div class="default text">Select an option</div>
						<div class="menu">
							<div class="item" data-value="1">1 &#40;Strongly Disagree&#41;</div>
							<div class="item" data-value="2">2</div>
							<div class="item" data-value="3">3</div>
							<div class="item" data-value="4">4</div>
							<div class="item" data-value="5">5 &#40;Strongly Agree&#41;</div>
						</div>
					</div>
				</div>

				<div class="field">
					<h2 class="ui grey header">Question 5</h2>
					<label>
						<h3>I like order.</h3>
					</label>
					<div class="ui selection dropdown">
						<input type="hidden" id="question_5" value="" />
						<i class="dropdown icon"></i>
						<div class="default text">Select an option</div>
						<div class="menu">
							<div class="item" data-value="1">1 &#40;Strongly Disagree&#41;</div>
							<div class="item" data-value="2">2</div>
							<div class="item" data-value="3">3</div>
							<div class="item" data-value="4">4</div>
							<div class="item" data-value="5">5 &#40;Strongly Agree&#41;</div>
						</div>
					</div>
				</div>

				<div class="field">
					<h2 class="ui grey header">Question 6</h2>
					<label>
						<h3>I try to follow the rules.</h3>
					</label>
					<div class="ui selection dropdown">
						<input type="hidden" id="question_6" value="" />
						<i class="dropdown icon"></i>
						<div class="default text">Select an option</div>
						<div class="menu">
							<div class="item" data-value="1">1 &#40;Strongly Disagree&#41;</div>
							<div class="item" data-value="2">2</div>
							<div class="item" data-value="3">3</div>
							<div class="item" data-value="4">4</div>
							<div class="item" data-value="5">5 &#40;Strongly Agree&#41;</div>
						</div>
					</div>
				</div>

				<div class="field">
					<h2 class="ui grey header">Question 7</h2>
					<label>
						<h3>I get stressed out easily.</h3>
					</label>
					<div class="ui selection dropdown">
						<input type="hidden" id="question_7" value="" />
						<i class="dropdown icon"></i>
						<div class="default text">Select an option</div>
						<div class="menu">
							<div class="item" data-value="1">1 &#40;Strongly Disagree&#41;</div>
							<div class="item" data-value="2">2</div>
							<div class="item" data-value="3">3</div>
							<div class="item" data-value="4">4</div>
							<div class="item" data-value="5">5 &#40;Strongly Agree&#41;</div>
						</div>
					</div>
				</div>

				<div class="field">
					<h2 class="ui grey header">Question 8</h2>
					<label>
						<h3>I start tasks right away.</h3>
					</label>
					<div class="ui selection dropdown">
						<input type="hidden" id="question_8" value="" />
						<i class="dropdown icon"></i>
						<div class="default text">Select an option</div>
						<div class="menu">
							<div class="item" data-value="1">1 &#40;Strongly Disagree&#41;</div>
							<div class="item" data-value="2">2</div>
							<div class="item" data-value="3">3</div>
							<div class="item" data-value="4">4</div>
							<div class="item" data-value="5">5 &#40;Strongly Agree&#41;</div>
						</div>
					</div>
				</div>

				<div class="field">
					<h2 class="ui grey header">Question 9</h2>
					<label>
						<h3>I value cooperation over competition.</h3>
					</label>
					<div class="ui selection dropdown">
						<input type="hidden" id="question_9" value="" />
						<i class="dropdown icon"></i>
						<div class="default text">Select an option</div>
						<div class="menu">
							<div class="item" data-value="1">1 &#40;Strongly Disagree&#41;</div>
							<div class="item" data-value="2">2</div>
							<div class="item" data-value="3">3</div>
							<div class="item" data-value="4">4</div>
							<div class="item" data-value="5">5 &#40;Strongly Agree&#41;</div>
						</div>
					</div>
				</div>

				<div class="field">
					<h2 class="ui grey header">Question 10</h2>
					<label>
						<h3>I choose my words with care.</h3>
					</label>
					<div class="ui selection dropdown">
						<input type="hidden" id="question_10" value="" />
						<i class="dropdown icon"></i>
						<div class="default text">Select an option</div>
						<div class="menu">
							<div class="item" data-value="1">1 &#40;Strongly Disagree&#41;</div>
							<div class="item" data-value="2">2</div>
							<div class="item" data-value="3">3</div>
							<div class="item" data-value="4">4</div>
							<div class="item" data-value="5">5 &#40;Strongly Agree&#41;</div>
						</div>
					</div>
				</div>
				<div class="fluid ui primary submit button">Submit</div>
			</div>

			<div class="ui mini modal">
				<i class="close icon" id="closeIcon"></i>
				<div class="header">Best Match</div>
				<div class="image content">
					<div class="ui medium image">
						<img id="friendImgUrl" src="" />
					</div>
				</div>
				<div class="content">
					<h3 id="friendName" class="ui center aligned header"></h3>
				</div>
			</div>
		</div>
		<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
		<script>
			$(".selection.dropdown").dropdown();
			// Store users survey data in usersData variable and post it to server to find a match friend
			$(".submit.button").click(function(event) {
				event.preventDefault();
				var userData = {
					name: $("#userName").val(),
					photo: $("#userImageUrl").val(),
					scores: [
						$("#question_1").val(),
						$("#question_2").val(),
						$("#question_3").val(),
						$("#question_4").val(),
						$("#question_5").val(),
						$("#question_6").val(),
						$("#question_7").val(),
						$("#question_8").val(),
						$("#question_9").val(),
						$("#question_10").val()
					]
				};

				$.post("/api/friends", userData).then(function(data) {
					console.log(data);
					$(".form").form("clear");
					$("#friendName").text(data.name);
					$("#friendImgUrl").attr("src", data.photo);

					// Modal will show name and picture of matching friend
					$(".ui.mini.modal")
						.modal("setting", "closable", false)
						.modal("setting", "transition", "horizontal flip")
						.modal("show");

				   // Closing modal will redirect to home page
					$("#closeIcon").click(function() {
						window.location.replace("/");
					});
				});
			});
		</script>
	</body>
</html>
